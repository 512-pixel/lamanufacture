<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MAISON NOIR — Prêt-à-Porter</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  :root {
    --noir:#0a0a0a; --blanc:#f5f0eb; --creme:#e8ddd0; --or:#c9a96e;
    --gris:#4a4a4a; --gris-clair:#9a9a9a; --fond:#f5f0eb;
  }
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  html{scroll-behavior:smooth}
  body{font-family:'Montserrat',sans-serif;background:var(--fond);color:var(--noir);overflow-x:hidden}

  /* ── CURSOR ── */
  .cursor{width:10px;height:10px;background:var(--or);border-radius:50%;position:fixed;top:0;left:0;pointer-events:none;z-index:9999;transform:translate(-50%,-50%);transition:width .3s,height .3s;mix-blend-mode:multiply}
  .cursor-ring{width:36px;height:36px;border:1px solid var(--or);border-radius:50%;position:fixed;top:0;left:0;pointer-events:none;z-index:9998;transform:translate(-50%,-50%);transition:transform .3s ease,width .3s,height .3s;opacity:.6}
  @media(hover:none){.cursor,.cursor-ring{display:none}}

  /* ── CONFIG BANNER ── */
  #configBanner{display:none;position:fixed;top:0;left:0;width:100%;background:#e74c3c;color:white;text-align:center;padding:.7rem;font-size:.65rem;letter-spacing:.1em;z-index:9999;font-family:'Montserrat',sans-serif}
  #configBanner a{color:white;font-weight:600;text-decoration:underline}

  /* ── NAV ── */
  nav{position:fixed;top:0;left:0;width:100%;display:flex;align-items:center;justify-content:space-between;padding:1.2rem 4rem;background:rgba(245,240,235,.92);backdrop-filter:blur(12px);z-index:1000;border-bottom:1px solid rgba(201,169,110,.2);transition:top .3s}
  nav.with-banner{top:38px}
  .nav-logo{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:300;letter-spacing:.3em;color:var(--noir);text-decoration:none}
  .nav-logo span{color:var(--or)}
  .nav-links{display:flex;gap:2.5rem;list-style:none}
  .nav-links a{font-size:.65rem;font-weight:500;letter-spacing:.2em;text-transform:uppercase;color:var(--gris);text-decoration:none;position:relative;padding-bottom:2px;transition:color .3s;cursor:pointer}
  .nav-links a::after{content:'';position:absolute;bottom:0;left:0;width:0;height:1px;background:var(--or);transition:width .3s}
  .nav-links a:hover{color:var(--noir)}
  .nav-links a:hover::after{width:100%}
  .nav-actions{display:flex;align-items:center;gap:1.5rem}
  .nav-icon{background:none;border:none;cursor:pointer;position:relative}
  .nav-icon svg{width:20px;height:20px;stroke:var(--gris);fill:none;stroke-width:1.5;transition:stroke .3s}
  .nav-icon:hover svg{stroke:var(--noir)}
  .cart-count{position:absolute;top:-6px;right:-6px;background:var(--or);color:white;font-size:.5rem;font-weight:600;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center}
  .hamburger{display:none;flex-direction:column;gap:5px;background:none;border:none;cursor:pointer}
  .hamburger span{width:24px;height:1px;background:var(--noir);transition:.3s}

  /* ── HERO ── */
  .hero{min-height:100vh;display:grid;grid-template-columns:1fr 1fr;padding-top:80px;overflow:hidden}
  .hero-text{display:flex;flex-direction:column;justify-content:center;padding:6rem 4rem 6rem 8rem;position:relative}
  .hero-text::before{content:'SS25';font-family:'Cormorant Garamond',serif;font-size:12rem;font-weight:300;color:rgba(201,169,110,.06);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);white-space:nowrap;pointer-events:none}
  .hero-sub{font-size:.6rem;letter-spacing:.4em;text-transform:uppercase;color:var(--or);margin-bottom:1.5rem;animation:fadeUp 1s ease both}
  .hero-title{font-family:'Cormorant Garamond',serif;font-size:clamp(3rem,6vw,5.5rem);font-weight:300;line-height:1.05;margin-bottom:2rem;animation:fadeUp 1s .15s ease both}
  .hero-title em{font-style:italic;color:var(--or)}
  .hero-desc{font-size:.75rem;line-height:1.9;color:var(--gris);max-width:340px;margin-bottom:3rem;animation:fadeUp 1s .3s ease both}
  .hero-cta{display:flex;gap:1.2rem;flex-wrap:wrap;animation:fadeUp 1s .45s ease both}
  .btn-primary{background:var(--noir);color:var(--blanc);padding:1rem 2.4rem;font-size:.6rem;letter-spacing:.25em;text-transform:uppercase;font-weight:500;border:none;cursor:pointer;text-decoration:none;transition:background .3s;display:inline-block}
  .btn-primary:hover{background:var(--or)}
  .btn-outline{background:transparent;color:var(--noir);padding:1rem 2.4rem;font-size:.6rem;letter-spacing:.25em;text-transform:uppercase;font-weight:500;border:1px solid var(--noir);cursor:pointer;text-decoration:none;transition:background .3s,color .3s;display:inline-block}
  .btn-outline:hover{background:var(--noir);color:var(--blanc)}
  .hero-image{position:relative;overflow:hidden;animation:fadeIn 1.2s ease both}
  .hero-image-inner{width:100%;height:100%;background:linear-gradient(135deg,#2a2a2a 0%,#1a1a1a 50%,#3a2a1a 100%);display:flex;align-items:center;justify-content:center}
  .hero-figure{width:60%;max-width:320px;position:relative;z-index:2}
  .hero-badge{position:absolute;bottom:3rem;left:-2rem;background:var(--or);color:white;padding:1.2rem 1.5rem;font-size:.55rem;letter-spacing:.2em;text-transform:uppercase;font-weight:600;z-index:3}
  .hero-badge strong{display:block;font-size:1.2rem;font-family:'Cormorant Garamond',serif;font-weight:400;letter-spacing:0}

  /* ── MARQUEE ── */
  .marquee-wrap{overflow:hidden;border-top:1px solid var(--creme);border-bottom:1px solid var(--creme);padding:1rem 0;background:var(--noir)}
  .marquee-track{display:flex;gap:4rem;animation:marquee 25s linear infinite;width:max-content}
  .marquee-item{font-size:.6rem;letter-spacing:.35em;text-transform:uppercase;color:var(--or);font-weight:500;white-space:nowrap;display:flex;align-items:center;gap:4rem}
  .marquee-item::after{content:'✦';font-size:.5rem}
  @keyframes marquee{to{transform:translateX(-50%)}}

  /* ── SECTIONS ── */
  .section{padding:6rem 4rem}
  .section-header{text-align:center;margin-bottom:3.5rem}
  .section-label{font-size:.6rem;letter-spacing:.4em;text-transform:uppercase;color:var(--or);margin-bottom:.8rem;display:block}
  .section-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,4vw,3.5rem);font-weight:300}

  /* ── CATEGORIES ── */
  .categories-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem}
  .cat-card{position:relative;overflow:hidden;cursor:pointer;aspect-ratio:3/4;transition:transform .4s}
  .cat-card:hover{transform:translateY(-6px)}
  .cat-card:hover .cat-bg-inner{transform:scale(1.06)}
  .cat-bg{width:100%;height:100%;overflow:hidden}
  .cat-bg-inner{width:100%;height:100%;transition:transform .6s ease;display:flex;align-items:center;justify-content:center}
  .cat-info{position:absolute;bottom:0;left:0;right:0;padding:2rem 1.5rem 1.5rem;background:linear-gradient(to top,rgba(0,0,0,.8) 0%,transparent 100%)}
  .cat-name{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:300;color:white;letter-spacing:.05em;display:block;margin-bottom:.3rem}
  .cat-count{font-size:.55rem;letter-spacing:.2em;text-transform:uppercase;color:rgba(255,255,255,.6)}

  /* ── FILTERS ── */
  .products-section{padding:2rem 4rem 6rem}
  .filters-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:2.5rem;flex-wrap:wrap;gap:1rem}
  .filter-chips{display:flex;gap:.6rem;flex-wrap:wrap}
  .chip{padding:.5rem 1.2rem;border:1px solid var(--creme);font-size:.6rem;letter-spacing:.15em;text-transform:uppercase;cursor:pointer;background:transparent;transition:background .25s,border-color .25s,color .25s;font-family:'Montserrat',sans-serif;color:var(--gris)}
  .chip.active,.chip:hover{background:var(--noir);border-color:var(--noir);color:white}
  .sort-select{font-family:'Montserrat',sans-serif;font-size:.6rem;letter-spacing:.15em;text-transform:uppercase;border:1px solid var(--creme);background:transparent;padding:.5rem 2rem .5rem 1rem;cursor:pointer;color:var(--gris);appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%239a9a9a'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .8rem center}

  /* ── PRODUCTS ── */
  .products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:2rem}
  .product-card{cursor:pointer;position:relative;transition:transform .3s}
  .product-card:hover{transform:translateY(-4px)}
  .product-card:hover .product-actions{opacity:1;transform:translateY(0)}
  .product-card:hover .product-thumb{transform:scale(1.04)}
  .product-img-wrap{overflow:hidden;aspect-ratio:3/4;position:relative;margin-bottom:1.2rem;background:var(--creme)}
  .product-thumb{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}
  .product-thumb.placeholder-img{display:flex;align-items:center;justify-content:center;background:var(--creme)}
  .badge-new{position:absolute;top:1rem;left:1rem;background:var(--noir);color:white;font-size:.5rem;letter-spacing:.2em;padding:.3rem .7rem;text-transform:uppercase}
  .badge-sale{position:absolute;top:1rem;left:1rem;background:var(--or);color:white;font-size:.5rem;letter-spacing:.2em;padding:.3rem .7rem;text-transform:uppercase}
  .wishlist-btn{position:absolute;top:1rem;right:1rem;background:white;border:none;cursor:pointer;width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s;box-shadow:0 2px 8px rgba(0,0,0,.1)}
  .product-card:hover .wishlist-btn{opacity:1}
  .wishlist-btn svg{width:14px;height:14px;stroke:var(--gris);fill:none;stroke-width:1.5;transition:stroke .2s,fill .2s}
  .wishlist-btn.active svg{stroke:#e74c3c;fill:#e74c3c}
  .product-actions{position:absolute;bottom:0;left:0;right:0;padding:1rem;opacity:0;transform:translateY(10px);transition:opacity .3s,transform .3s}
  .size-quick{display:flex;gap:.4rem;margin-bottom:.6rem;flex-wrap:wrap}
  .size-btn{background:white;border:1px solid var(--creme);font-size:.5rem;font-weight:600;padding:.3rem .5rem;cursor:pointer;font-family:'Montserrat',sans-serif;transition:background .2s,border-color .2s;min-width:32px;text-align:center}
  .size-btn:hover,.size-btn.selected{background:var(--noir);color:white;border-color:var(--noir)}
  .size-btn.unavailable{opacity:.3;cursor:not-allowed}
  .add-to-cart{width:100%;background:var(--noir);color:white;border:none;cursor:pointer;font-family:'Montserrat',sans-serif;font-size:.55rem;letter-spacing:.2em;text-transform:uppercase;padding:.75rem;transition:background .3s;font-weight:500}
  .add-to-cart:hover{background:var(--or)}
  .product-meta{padding:0 .2rem}
  .product-brand{font-size:.5rem;letter-spacing:.2em;text-transform:uppercase;color:var(--or);margin-bottom:.3rem}
  .product-name{font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:400;margin-bottom:.5rem}
  .product-price{display:flex;gap:.8rem;align-items:baseline}
  .price-current{font-size:.9rem;font-weight:500}
  .price-old{font-size:.75rem;color:var(--gris-clair);text-decoration:line-through}
  .add-mobile{display:none;width:100%;background:var(--noir);color:white;border:none;cursor:pointer;font-family:'Montserrat',sans-serif;font-size:.55rem;letter-spacing:.15em;text-transform:uppercase;padding:.65rem;margin-top:.6rem;font-weight:500}
  @media(hover:none){.add-mobile{display:block}.product-actions{display:none!important}}

  /* ── LOADING / EMPTY ── */
  .skeleton-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:2rem}
  .skeleton-card{background:var(--creme);animation:pulse 1.5s ease-in-out infinite}
  .skeleton-img{aspect-ratio:3/4;background:linear-gradient(90deg,var(--creme) 25%,#ddd4c0 50%,var(--creme) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}
  .skeleton-line{height:12px;margin:8px 0;border-radius:2px;background:linear-gradient(90deg,var(--creme) 25%,#ddd4c0 50%,var(--creme) 75%);background-size:200% 100%;animation:shimmer 1.5s infinite}
  .skeleton-line.short{width:60%}
  @keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
  @keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}
  .empty-state{text-align:center;padding:5rem 2rem;grid-column:1/-1}
  .empty-state p{font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:300;color:var(--gris);margin-bottom:.5rem}
  .empty-state span{font-size:.65rem;color:var(--gris-clair);letter-spacing:.1em}

  /* ── CART ── */
  .cart-modal{position:fixed;inset:0;z-index:2000;display:flex;justify-content:flex-end;opacity:0;pointer-events:none;transition:opacity .3s}
  .cart-modal.open{opacity:1;pointer-events:all}
  .cart-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5)}
  .cart-panel{position:relative;z-index:1;width:min(420px,100vw);background:var(--fond);display:flex;flex-direction:column;transform:translateX(100%);transition:transform .4s cubic-bezier(.4,0,.2,1);overflow:hidden}
  .cart-modal.open .cart-panel{transform:translateX(0)}
  .cart-header{padding:2rem;border-bottom:1px solid var(--creme);display:flex;justify-content:space-between;align-items:center}
  .cart-title{font-family:'Cormorant Garamond',serif;font-size:1.6rem;font-weight:300}
  .cart-close{background:none;border:none;cursor:pointer;font-size:1.5rem;color:var(--gris)}
  .cart-items{flex:1;overflow-y:auto;padding:1.5rem 2rem}
  .cart-item{display:flex;gap:1rem;margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid var(--creme)}
  .cart-item-img{width:80px;height:100px;background:var(--creme);flex-shrink:0;overflow:hidden}
  .cart-item-img img{width:100%;height:100%;object-fit:cover}
  .cart-item-info{flex:1}
  .cart-item-name{font-family:'Cormorant Garamond',serif;font-size:1rem;margin-bottom:.3rem}
  .cart-item-size{font-size:.55rem;letter-spacing:.15em;text-transform:uppercase;color:var(--gris-clair);margin-bottom:.5rem}
  .cart-item-price{font-size:.85rem;font-weight:500}
  .cart-qty{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}
  .qty-btn{background:var(--creme);border:none;cursor:pointer;width:24px;height:24px;font-size:.8rem;display:flex;align-items:center;justify-content:center}
  .qty-val{font-size:.75rem;font-weight:500;min-width:20px;text-align:center}
  .cart-item-remove{background:none;border:none;cursor:pointer;color:var(--gris-clair);font-size:.6rem;letter-spacing:.1em;text-transform:uppercase;text-decoration:underline;margin-top:.5rem;padding:0;display:block;font-family:'Montserrat',sans-serif}
  .cart-footer{padding:1.5rem 2rem;border-top:1px solid var(--creme)}
  .cart-total{display:flex;justify-content:space-between;margin-bottom:1.5rem}
  .cart-total-label{font-size:.6rem;letter-spacing:.2em;text-transform:uppercase;color:var(--gris)}
  .cart-total-amount{font-family:'Cormorant Garamond',serif;font-size:1.5rem}
  .checkout-btn{width:100%;background:var(--noir);color:white;border:none;cursor:pointer;padding:1.1rem;font-family:'Montserrat',sans-serif;font-size:.6rem;letter-spacing:.25em;text-transform:uppercase;font-weight:500;transition:background .3s}
  .checkout-btn:hover{background:var(--or)}
  .cart-empty{text-align:center;padding:3rem;color:var(--gris-clair)}
  .cart-empty p{font-family:'Cormorant Garamond',serif;font-size:1.3rem;font-weight:300;margin-bottom:1rem}

  /* ── NEWSLETTER ── */
  .newsletter{background:var(--noir);color:var(--blanc);padding:6rem 4rem;text-align:center;position:relative;overflow:hidden}
  .newsletter::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at center,rgba(201,169,110,.08) 0%,transparent 70%)}
  .newsletter-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,4vw,3.5rem);font-weight:300;margin-bottom:1rem;position:relative}
  .newsletter-sub{font-size:.7rem;color:rgba(255,255,255,.5);letter-spacing:.1em;margin-bottom:2.5rem;position:relative}
  .newsletter-form{display:flex;max-width:480px;margin:0 auto;position:relative}
  .newsletter-input{flex:1;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.15);border-right:none;padding:1rem 1.5rem;font-family:'Montserrat',sans-serif;font-size:.7rem;color:white;outline:none;transition:border-color .3s}
  .newsletter-input::placeholder{color:rgba(255,255,255,.3)}
  .newsletter-input:focus{border-color:var(--or)}
  .newsletter-btn{background:var(--or);border:none;cursor:pointer;padding:1rem 1.8rem;font-family:'Montserrat',sans-serif;font-size:.55rem;letter-spacing:.2em;text-transform:uppercase;font-weight:600;color:white;transition:background .3s}
  .newsletter-btn:hover{background:#b8935a}

  /* ── FOOTER ── */
  footer{background:#080808;color:rgba(255,255,255,.5);padding:4rem}
  .footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:3rem;margin-bottom:3rem}
  .footer-brand{font-family:'Cormorant Garamond',serif;font-size:1.8rem;font-weight:300;color:white;letter-spacing:.2em;margin-bottom:1rem}
  .footer-desc{font-size:.65rem;line-height:1.8;max-width:260px}
  .footer-heading{font-size:.55rem;letter-spacing:.3em;text-transform:uppercase;color:var(--or);margin-bottom:1.2rem;font-weight:600}
  .footer-links{list-style:none}
  .footer-links li{margin-bottom:.7rem}
  .footer-links a{font-size:.65rem;color:rgba(255,255,255,.5);text-decoration:none;transition:color .3s}
  .footer-links a:hover{color:white}
  .footer-bottom{border-top:1px solid rgba(255,255,255,.06);padding-top:2rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
  .footer-copy{font-size:.55rem;letter-spacing:.1em}
  .footer-social{display:flex;gap:1rem}
  .social-link{width:32px;height:32px;border:1px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;text-decoration:none;transition:border-color .3s,background .3s}
  .social-link:hover{border-color:var(--or);background:var(--or)}
  .social-link svg{width:14px;height:14px;fill:rgba(255,255,255,.6)}
  .social-link:hover svg{fill:white}

  /* ── TOAST ── */
  .toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(100px);background:var(--noir);color:white;padding:.9rem 2rem;font-size:.6rem;letter-spacing:.15em;text-transform:uppercase;z-index:3000;transition:transform .4s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;gap:.8rem;white-space:nowrap}
  .toast.show{transform:translateX(-50%) translateY(0)}
  .toast-icon{width:16px;height:16px;background:var(--or);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}

  /* ── MOBILE MENU ── */
  .mobile-menu{position:fixed;inset:0;z-index:1500;background:var(--fond);display:flex;flex-direction:column;padding:6rem 3rem 3rem;transform:translateX(-100%);transition:transform .4s cubic-bezier(.4,0,.2,1)}
  .mobile-menu.open{transform:translateX(0)}
  .mobile-menu a{font-family:'Cormorant Garamond',serif;font-size:2.5rem;font-weight:300;color:var(--noir);text-decoration:none;padding:.8rem 0;border-bottom:1px solid var(--creme);display:block;transition:color .3s,padding-left .3s;cursor:pointer}
  .mobile-menu a:hover{color:var(--or);padding-left:.5rem}
  .mobile-close{position:absolute;top:1.5rem;right:2rem;background:none;border:none;font-size:1.8rem;cursor:pointer;color:var(--gris)}

  /* ── ANIMATIONS ── */
  @keyframes fadeUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  .fade-up{opacity:0;transform:translateY(30px);transition:opacity .7s ease,transform .7s ease}
  .fade-up.visible{opacity:1;transform:translateY(0)}

  /* ── RESPONSIVE ── */
  @media(max-width:1024px){
    nav{padding:1.2rem 2rem}
    .nav-links{display:none}
    .hamburger{display:flex}
    .hero{grid-template-columns:1fr;min-height:auto}
    .hero-text{padding:4rem 2rem;order:2}
    .hero-text::before{font-size:6rem}
    .hero-image{height:60vw;order:1}
    .hero-badge{left:1rem;bottom:1rem}
    .section{padding:4rem 2rem}
    .categories-grid{grid-template-columns:repeat(2,1fr)}
    .products-section{padding:2rem 2rem 4rem}
    .footer-grid{grid-template-columns:1fr 1fr}
    .newsletter{padding:4rem 2rem}
  }
  @media(max-width:600px){
    .categories-grid{grid-template-columns:1fr 1fr;gap:1rem}
    .products-grid{grid-template-columns:repeat(2,1fr);gap:1rem}
    .footer-grid{grid-template-columns:1fr;gap:2rem}
    .newsletter-form{flex-direction:column}
    .newsletter-input{border-right:1px solid rgba(255,255,255,.15);border-bottom:none}
    .hero-cta{flex-direction:column}
    .filters-bar{flex-direction:column;align-items:flex-start}
    footer{padding:2rem}
  }
  ::-webkit-scrollbar{width:4px}
  ::-webkit-scrollbar-track{background:var(--creme)}
  ::-webkit-scrollbar-thumb{background:var(--or)}
</style>
</head>
<body>

<!-- CONFIG BANNER -->
<div id="configBanner">
  ⚠️ Supabase non configuré — Modifiez les variables <code>SUPABASE_URL</code> et <code>SUPABASE_ANON_KEY</code> dans le fichier index.html &nbsp;|&nbsp;
  <a href="admin.html">Ouvrir l'admin →</a>
</div>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursor-ring"></div>

<!-- NAV -->
<nav id="mainNav">
  <a href="#" class="nav-logo">MAISON<span>.</span>NOIR</a>
  <ul class="nav-links" id="navLinks">
    <li><a onclick="filterCat('Tous')">Tous</a></li>
    <li><a onclick="filterCat('Femme')">Femme</a></li>
    <li><a onclick="filterCat('Homme')">Homme</a></li>
    <li><a onclick="filterCat('Enfant')">Enfant</a></li>
    <li><a onclick="filterCat('Accessoires')">Accessoires</a></li>
    <li><a href="admin.html" style="color:var(--or)">Admin ⚙️</a></li>
  </ul>
  <div class="nav-actions">
    <button class="nav-icon" onclick="toggleCart()">
      <svg viewBox="0 0 24 24"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4zM3 6h18M16 10a4 4 0 01-8 0"/></svg>
      <span class="cart-count" id="cartCount">0</span>
    </button>
    <button class="hamburger" onclick="toggleMobileMenu()"><span></span><span></span><span></span></button>
  </div>
</nav>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu">
  <button class="mobile-close" onclick="toggleMobileMenu()">✕</button>
  <a onclick="filterCat('Tous');toggleMobileMenu()">Tous les produits</a>
  <a onclick="filterCat('Femme');toggleMobileMenu()">Femme</a>
  <a onclick="filterCat('Homme');toggleMobileMenu()">Homme</a>
  <a onclick="filterCat('Enfant');toggleMobileMenu()">Enfant</a>
  <a onclick="filterCat('Accessoires');toggleMobileMenu()">Accessoires</a>
  <a href="admin.html" style="color:var(--or)">Admin ⚙️</a>
</div>

<!-- HERO -->
<section class="hero">
  <div class="hero-text">
    <span class="hero-sub">Collection Printemps — Été 2025</span>
    <h1 class="hero-title">L'élégance<br>à l'état <em>pur</em></h1>
    <p class="hero-desc">Des pièces intemporelles conçues pour traverser les saisons. Matières nobles, coupes sculpturales, silhouettes affinées.</p>
    <div class="hero-cta">
      <a href="#products" class="btn-primary">Découvrir la collection</a>
      <a href="#categories" class="btn-outline">Catégories</a>
    </div>
  </div>
  <div class="hero-image">
    <div class="hero-image-inner">
      <svg viewBox="0 0 300 480" class="hero-figure" xmlns="http://www.w3.org/2000/svg">
        <defs><linearGradient id="fig" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#c9a96e;stop-opacity:0.8"/><stop offset="100%" style="stop-color:#8b6914;stop-opacity:0.6"/></linearGradient></defs>
        <ellipse cx="150" cy="60" rx="30" ry="35" fill="url(#fig)" opacity=".9"/>
        <path d="M90,130 Q70,160 65,220 Q60,280 70,360 Q100,400 150,410 Q200,400 230,360 Q240,280 235,220 Q230,160 210,130 Q185,120 150,115 Q115,120 90,130Z" fill="url(#fig)" opacity=".7"/>
        <path d="M115,120 Q130,135 150,130 Q170,135 185,120 L180,110 L150,115 L120,110Z" fill="rgba(201,169,110,0.9)"/>
        <path d="M90,135 Q60,170 55,230 Q55,245 70,250 Q80,200 100,165Z" fill="url(#fig)" opacity=".7"/>
        <path d="M210,135 Q240,170 245,230 Q245,245 230,250 Q220,200 200,165Z" fill="url(#fig)" opacity=".7"/>
        <rect x="95" y="210" width="110" height="12" rx="2" fill="rgba(201,169,110,1)" opacity=".8"/>
        <rect x="115" y="400" width="30" height="70" rx="4" fill="rgba(50,30,10,0.8)"/>
        <rect x="155" y="400" width="30" height="70" rx="4" fill="rgba(50,30,10,0.8)"/>
        <ellipse cx="130" cy="472" rx="20" ry="8" fill="rgba(20,10,5,0.9)"/>
        <ellipse cx="170" cy="472" rx="20" ry="8" fill="rgba(20,10,5,0.9)"/>
      </svg>
      <div class="hero-badge"><strong>−30%</strong>Sur la collection Hiver</div>
    </div>
  </div>
</section>

<!-- MARQUEE -->
<div class="marquee-wrap">
  <div class="marquee-track">
    <span class="marquee-item">Livraison offerte dès 150€</span>
    <span class="marquee-item">Nouvelle collection SS25</span>
    <span class="marquee-item">Retours gratuits 30 jours</span>
    <span class="marquee-item">Matières premium & durables</span>
    <span class="marquee-item">Service client 7j/7</span>
    <span class="marquee-item">Livraison offerte dès 150€</span>
    <span class="marquee-item">Nouvelle collection SS25</span>
    <span class="marquee-item">Retours gratuits 30 jours</span>
    <span class="marquee-item">Matières premium & durables</span>
    <span class="marquee-item">Service client 7j/7</span>
  </div>
</div>

<!-- CATEGORIES -->
<section class="section" id="categories">
  <div class="section-header fade-up">
    <span class="section-label">Explorer</span>
    <h2 class="section-title">Nos Catégories</h2>
  </div>
  <div class="categories-grid fade-up" id="categoriesGrid">
    <!-- populated dynamically -->
  </div>
</section>

<!-- PRODUCTS -->
<section class="products-section" id="products">
  <div class="section-header fade-up">
    <span class="section-label">Sélection</span>
    <h2 class="section-title">Nos Produits</h2>
  </div>
  <div class="filters-bar fade-up">
    <div class="filter-chips" id="filterChips">
      <button class="chip active" onclick="filterCat('Tous')">Tous</button>
    </div>
    <select class="sort-select" onchange="sortProducts(this.value)">
      <option value="default">Trier par</option>
      <option value="price-asc">Prix croissant</option>
      <option value="price-desc">Prix décroissant</option>
      <option value="new">Nouveautés</option>
    </select>
  </div>
  <div class="products-grid" id="productsGrid">
    <!-- skeleton -->
  </div>
</section>

<!-- NEWSLETTER -->
<section class="newsletter">
  <h2 class="newsletter-title">Accès en avant-première</h2>
  <p class="newsletter-sub">Inscrivez-vous pour recevoir nos nouvelles collections et offres exclusives.</p>
  <div class="newsletter-form">
    <input class="newsletter-input" type="email" placeholder="Votre adresse email" id="emailInput">
    <button class="newsletter-btn" onclick="subscribeNewsletter()">S'inscrire</button>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-grid">
    <div>
      <div class="footer-brand">MAISON<span style="color:var(--or)">.</span>NOIR</div>
      <p class="footer-desc">Une maison de mode française fondée sur les principes d'élégance, d'authenticité et de savoir-faire artisanal.</p>
    </div>
    <div>
      <p class="footer-heading">Collections</p>
      <ul class="footer-links">
        <li><a href="#" onclick="filterCat('Femme')">Femme</a></li>
        <li><a href="#" onclick="filterCat('Homme')">Homme</a></li>
        <li><a href="#" onclick="filterCat('Enfant')">Enfant</a></li>
        <li><a href="#" onclick="filterCat('Accessoires')">Accessoires</a></li>
      </ul>
    </div>
    <div>
      <p class="footer-heading">Information</p>
      <ul class="footer-links">
        <li><a href="#">Livraison & retours</a></li>
        <li><a href="#">Guide des tailles</a></li>
        <li><a href="#">Mentions légales</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </div>
    <div>
      <p class="footer-heading">Aide</p>
      <ul class="footer-links">
        <li><a href="#">FAQ</a></li>
        <li><a href="#">Suivi commande</a></li>
        <li><a href="admin.html">Administration</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <p class="footer-copy">© 2025 Maison Noir. Tous droits réservés.</p>
    <div class="footer-social">
      <a href="#" class="social-link"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073z"/></svg></a>
    </div>
  </div>
</footer>

<!-- CART -->
<div class="cart-modal" id="cartModal">
  <div class="cart-backdrop" onclick="toggleCart()"></div>
  <div class="cart-panel">
    <div class="cart-header">
      <span class="cart-title">Mon Panier</span>
      <button class="cart-close" onclick="toggleCart()">✕</button>
    </div>
    <div class="cart-items" id="cartItems">
      <div class="cart-empty"><p>Panier vide</p><span>Ajoutez des pièces pour commencer</span></div>
    </div>
    <div class="cart-footer" id="cartFooter" style="display:none">
      <div class="cart-total">
        <span class="cart-total-label">Total</span>
        <span class="cart-total-amount" id="cartTotal">0,00 €</span>
      </div>
      <button class="checkout-btn">Passer la commande →</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"><div class="toast-icon">✓</div><span id="toastMsg"></span></div>

<script>
// ════════════════════════════════════════════
// ⚙️  CONFIGURATION — Remplacez ces valeurs
// ════════════════════════════════════════════
const SUPABASE_URL      = 'VOTRE_URL_SUPABASE';      // ex: https://xxxx.supabase.co
const SUPABASE_ANON_KEY = 'VOTRE_ANON_KEY_SUPABASE'; // clé publique "anon"
// ════════════════════════════════════════════

const isConfigured = SUPABASE_URL !== 'VOTRE_URL_SUPABASE';
// ⚠️ Renamed to avoid conflict with the global `supabase` object from the CDN lib
let sbClient = null;
let allProducts = [];
let allCategories = [];
let currentFilter = 'Tous';
let selectedSizes = {};
let cart = [];

// ── INIT ──
async function init() {
  if (!isConfigured) {
    document.getElementById('configBanner').style.display = 'block';
    document.getElementById('mainNav').classList.add('with-banner');
    renderSkeletons();
    return;
  }
  // window.supabase is the CDN library; .createClient() returns our client instance
  sbClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  await loadCategories();
  await loadProducts();
  initScrollObserver();
}

// ── CATEGORIES ──
async function loadCategories() {
  const { data, error } = await sbClient.from('categories').select('*').order('name');
  if (error) { console.error(error); return; }
  allCategories = data;
  renderCategories();
  renderFilterChips();
}

const CAT_COLORS = {
  femme: 'linear-gradient(145deg,#2d2520 0%,#1a1410 100%)',
  homme: 'linear-gradient(145deg,#1a2030 0%,#0d1520 100%)',
  enfant: 'linear-gradient(145deg,#2a1f2d 0%,#1a1020 100%)',
  accessoires: 'linear-gradient(145deg,#201a10 0%,#2a2015 100%)',
};

function renderCategories() {
  const grid = document.getElementById('categoriesGrid');
  grid.innerHTML = allCategories.map(cat => `
    <div class="cat-card" onclick="filterCat('${cat.name}')">
      <div class="cat-bg">
        <div class="cat-bg-inner" style="background:${CAT_COLORS[cat.slug] || 'linear-gradient(145deg,#1a1a1a,#2a2a2a)'}">
          <svg viewBox="0 0 200 200" width="120" height="120" xmlns="http://www.w3.org/2000/svg" opacity=".4">
            <text x="100" y="130" font-size="100" text-anchor="middle" fill="#c9a96e" font-family="serif">${cat.name[0]}</text>
          </svg>
        </div>
      </div>
      <div class="cat-info">
        <span class="cat-name">${cat.name}</span>
        <span class="cat-count" id="count-${cat.id}">… pièces</span>
      </div>
    </div>
  `).join('');
}

function renderFilterChips() {
  const chips = document.getElementById('filterChips');
  chips.innerHTML = `<button class="chip active" onclick="filterCat('Tous')">Tous</button>` +
    allCategories.map(c => `<button class="chip" onclick="filterCat('${c.name}')">${c.name}</button>`).join('');
}

// ── PRODUCTS ──
async function loadProducts() {
  renderSkeletons();
  const { data, error } = await sbClient
    .from('products')
    .select('*, categories(name, slug)')
    .eq('is_active', true)
    .order('created_at', { ascending: false });
  if (error) { console.error(error); showToast('Erreur de chargement'); return; }
  allProducts = data;
  // Update category counts
  allCategories.forEach(cat => {
    const count = allProducts.filter(p => p.category_id === cat.id).length;
    const el = document.getElementById(`count-${cat.id}`);
    if (el) el.textContent = `${count} pièce${count>1?'s':''}`;
  });
  renderProducts();
}

function renderSkeletons(n=8) {
  document.getElementById('productsGrid').innerHTML = Array(n).fill(0).map(() => `
    <div class="skeleton-card">
      <div class="skeleton-img"></div>
      <div style="padding:.5rem 0">
        <div class="skeleton-line short"></div>
        <div class="skeleton-line"></div>
        <div class="skeleton-line short"></div>
      </div>
    </div>
  `).join('');
}

function renderProducts(filter=currentFilter, sortVal='default') {
  let list = filter === 'Tous' ? [...allProducts] : allProducts.filter(p => p.categories?.name === filter);
  if (sortVal === 'price-asc')  list.sort((a,b) => a.price - b.price);
  if (sortVal === 'price-desc') list.sort((a,b) => b.price - a.price);
  if (sortVal === 'new')        list.sort((a,b) => b.is_new - a.is_new);

  const grid = document.getElementById('productsGrid');
  if (!list.length) {
    grid.innerHTML = `<div class="empty-state"><p>Aucun produit trouvé</p><span>Revenez bientôt ou explorez d'autres catégories</span></div>`;
    return;
  }
  grid.innerHTML = list.map(p => {
    const sizes = p.sizes || [];
    const unavail = p.unavailable_sizes || [];
    const hasSale = !!p.old_price;
    return `
    <div class="product-card" data-id="${p.id}">
      <div class="product-img-wrap">
        ${p.image_url
          ? `<img class="product-thumb" src="${p.image_url}" alt="${p.name}" loading="lazy" onerror="this.style.display='none';this.nextSibling.style.display='flex'">`
          : ''}
        <div class="product-thumb placeholder-img" style="${p.image_url?'display:none':''}">
          <svg viewBox="0 0 100 120" width="80" xmlns="http://www.w3.org/2000/svg" opacity=".3">
            <ellipse cx="50" cy="20" rx="14" ry="16" fill="#c9a96e"/>
            <path d="M22,50 Q15,70 18,100 L82,100 Q85,70 78,50 Q65,38 50,36 Q35,38 22,50Z" fill="#c9a96e"/>
          </svg>
        </div>
        ${p.is_new && !hasSale ? '<span class="badge-new">Nouveau</span>' : ''}
        ${hasSale ? '<span class="badge-sale">Soldes</span>' : ''}
        <button class="wishlist-btn" id="wish-${p.id}" onclick="toggleWish('${p.id}',event)">
          <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        </button>
        <div class="product-actions">
          <div class="size-quick" id="sizes-${p.id}">
            ${sizes.map(s => `<button class="size-btn${unavail.includes(s)?' unavailable':''}" onclick="selectSize('${p.id}','${s}',event)" ${unavail.includes(s)?'disabled':''}>${s}</button>`).join('')}
          </div>
          <button class="add-to-cart" onclick="addToCart('${p.id}')">Ajouter au panier</button>
        </div>
      </div>
      <div class="product-meta">
        <p class="product-brand">${p.brand || 'Maison Noir'}</p>
        <p class="product-name">${p.name}</p>
        <div class="product-price">
          <span class="price-current">${Number(p.price).toFixed(2).replace('.',',')} €</span>
          ${p.old_price ? `<span class="price-old">${Number(p.old_price).toFixed(2).replace('.',',')} €</span>` : ''}
        </div>
      </div>
      <button class="add-mobile" onclick="addToCart('${p.id}')">+ Ajouter au panier</button>
    </div>`;
  }).join('');
}

function filterCat(cat) {
  currentFilter = cat;
  document.querySelectorAll('.chip').forEach(c => {
    c.classList.toggle('active', c.textContent.trim() === cat || (cat==='Tous' && c.textContent.trim()==='Tous'));
  });
  renderProducts(cat);
  document.getElementById('products').scrollIntoView({behavior:'smooth'});
}
window.filterCat = filterCat;

function sortProducts(val) { renderProducts(currentFilter, val); }
window.sortProducts = sortProducts;

function selectSize(id, size, e) {
  e.stopPropagation();
  selectedSizes[id] = size;
  document.querySelectorAll(`#sizes-${id} .size-btn`).forEach(b => b.classList.remove('selected'));
  e.target.classList.add('selected');
}
window.selectSize = selectSize;

function toggleWish(id, e) {
  e.stopPropagation();
  const btn = document.getElementById(`wish-${id}`);
  btn.classList.toggle('active');
  showToast(btn.classList.contains('active') ? 'Ajouté aux favoris ♥' : 'Retiré des favoris');
}
window.toggleWish = toggleWish;

// ── CART ──
function addToCart(id) {
  const p = allProducts.find(x => x.id === id);
  if (!p) return;
  const avail = (p.sizes||[]).filter(s=>!(p.unavailable_sizes||[]).includes(s));
  const size = selectedSizes[id] || avail[0] || 'TU';
  const existing = cart.find(i => i.id===id && i.size===size);
  if (existing) existing.qty++;
  else cart.push({...p, size, qty:1});
  updateCartUI();
  showToast(`${p.name} (${size}) ajouté`);
}
window.addToCart = addToCart;

function removeFromCart(id, size) {
  cart = cart.filter(i => !(i.id===id && i.size===size));
  updateCartUI();
}
window.removeFromCart = removeFromCart;

function changeQty(id, size, delta) {
  const item = cart.find(i => i.id===id && i.size===size);
  if (!item) return;
  item.qty += delta;
  if (item.qty <= 0) removeFromCart(id, size);
  else updateCartUI();
}
window.changeQty = changeQty;

function updateCartUI() {
  const count = cart.reduce((s,i) => s+i.qty, 0);
  const total = cart.reduce((s,i) => s+Number(i.price)*i.qty, 0);
  document.getElementById('cartCount').textContent = count;
  const items = document.getElementById('cartItems');
  const footer = document.getElementById('cartFooter');
  if (!cart.length) {
    items.innerHTML = `<div class="cart-empty"><p>Panier vide</p><span>Ajoutez des pièces pour commencer</span></div>`;
    footer.style.display = 'none';
  } else {
    items.innerHTML = cart.map(i => `
      <div class="cart-item">
        <div class="cart-item-img">
          ${i.image_url ? `<img src="${i.image_url}" alt="${i.name}">` : `<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:var(--creme)"><svg viewBox="0 0 60 70" width="40" xmlns="http://www.w3.org/2000/svg" opacity=".4"><ellipse cx="30" cy="12" rx="9" ry="10" fill="#c9a96e"/><path d="M12,28 Q8,40 10,65 L50,65 Q52,40 48,28 Q40,22 30,21 Q20,22 12,28Z" fill="#c9a96e"/></svg></div>`}
        </div>
        <div class="cart-item-info">
          <p class="cart-item-name">${i.name}</p>
          <p class="cart-item-size">Taille: ${i.size}</p>
          <p class="cart-item-price">${(Number(i.price)*i.qty).toFixed(2).replace('.',',')} €</p>
          <div class="cart-qty">
            <button class="qty-btn" onclick="changeQty('${i.id}','${i.size}',-1)">−</button>
            <span class="qty-val">${i.qty}</span>
            <button class="qty-btn" onclick="changeQty('${i.id}','${i.size}',1)">+</button>
          </div>
          <button class="cart-item-remove" onclick="removeFromCart('${i.id}','${i.size}')">Retirer</button>
        </div>
      </div>
    `).join('');
    footer.style.display = 'block';
    document.getElementById('cartTotal').textContent = total.toFixed(2).replace('.',',') + ' €';
  }
}

function toggleCart() {
  document.getElementById('cartModal').classList.toggle('open');
  document.body.style.overflow = document.getElementById('cartModal').classList.contains('open') ? 'hidden' : '';
}
window.toggleCart = toggleCart;

// ── MISC ──
function showToast(msg) {
  const t = document.getElementById('toast');
  document.getElementById('toastMsg').textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2800);
}

function subscribeNewsletter() {
  const inp = document.getElementById('emailInput');
  if (inp.value && inp.value.includes('@')) { showToast('Inscription confirmée ! Merci.'); inp.value=''; }
  else showToast('Veuillez entrer un email valide.');
}
window.subscribeNewsletter = subscribeNewsletter;

function toggleMobileMenu() { document.getElementById('mobileMenu').classList.toggle('open'); }
window.toggleMobileMenu = toggleMobileMenu;

function initScrollObserver() {
  const obs = new IntersectionObserver(es => es.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); }), {threshold:.1});
  document.querySelectorAll('.fade-up').forEach(el => obs.observe(el));
}

// Custom cursor
const cursor = document.getElementById('cursor');
const ring   = document.getElementById('cursor-ring');
document.addEventListener('mousemove', e => {
  cursor.style.left = e.clientX+'px'; cursor.style.top = e.clientY+'px';
  setTimeout(()=>{ ring.style.left=e.clientX+'px'; ring.style.top=e.clientY+'px'; },60);
});
document.querySelectorAll('button,a,.product-card,.cat-card').forEach(el => {
  el.addEventListener('mouseenter',()=>{ cursor.style.width='16px'; cursor.style.height='16px'; ring.style.width='50px'; ring.style.height='50px'; });
  el.addEventListener('mouseleave',()=>{ cursor.style.width='10px'; cursor.style.height='10px'; ring.style.width='36px'; ring.style.height='36px'; });
});

init();
</script>
</body>
</html>
